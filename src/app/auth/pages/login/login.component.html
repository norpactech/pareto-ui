@if (displayType === 'login') {
  <div class="d-flex justify-content-center py-5 body">
    <div class="row">
      <div class="col-md-4 d-flex justify-content-center"></div>
      <div class="col-md-4 d-flex justify-content-center">
        <div class="row">
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-12 d-flex justify-content-center">
                <img
                  src="/assets/img/android-chrome-192x192.png"
                  class="card-img-top"
                  alt="pareto-icon" />
              </div>
            </div>
            <div class="row mt-4">
              <div class="col-md-12 d-flex justify-content-center">
                <div class="mat-headline-5 primary-green fs-4">
                  <p class="fw-medium">Login to Pareto Factory</p>
                </div>
              </div>
            </div>
            <div class="mt-3" fxLayout="row" fxLayoutAlign="center">
              <mat-card class="rounded-3" appearance="outlined" fxFlex="450px">
                <mat-card-content>
                  <form
                    [formGroup]="loginForm"
                    (ngSubmit)="login(loginForm)"
                    fxLayout="column">
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                      <mat-form-field fxFlex appearance="outline" class="rounded-form">
                        <input
                          matInput
                          placeholder="E-mail"
                          aria-label="E-mail"
                          formControlName="email"
                          #email />
                        <mat-error
                          [input]="email"
                          [group]="loginForm"
                          appFieldError="invalid">
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div class="row mb-n1 mt-3 forgot-passoword text-end">
                      <span
                        ><a
                          class="text-success signup-link"
                          (click)="goToForgotPassword()"
                          >Forgot Password?</a
                        ></span
                      >
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                      <mat-form-field fxFlex appearance="outline" class="rounded-form">
                        <input
                          matInput
                          placeholder="Password"
                          aria-label="Password"
                          type="password"
                          formControlName="password"
                          #password />
                        <mat-hint>Minimum 8 characters</mat-hint>
                        <mat-error
                          [input]="password"
                          [group]="loginForm"
                          [appFieldError]="['required', 'minlength', 'maxlength']">
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div fxLayout="row" class="top-pad">
                      @if (loginError) {
                        <div class="mat-caption error">{{ loginError }}</div>
                      }
                      <div class="flex-spacer"></div>
                    </div>

                    <div class="row mt-3 mb-3">
                      <div class="col-md-12 d-flex justify-content-center">
                        <button
                          class="px-5 py-3 rounded-5 full-width bg-success text-light mt-3 sign-up-button"
                          mat-raised-button
                          type="submit"
                          color="primary"
                          [disabled]="loginForm.invalid"
                          (click)="login(loginForm)">
                          Login
                        </button>
                      </div>
                    </div>
                  </form>
                </mat-card-content>
              </mat-card>
            </div>
            <div class="row pt-2">
              <div class="col-md-12">
                <div class="separator">
                  <span>OR</span>
                </div>
              </div>
            </div>
            <div fxLayout="row" fxLayoutAlign="center">
              <mat-card class="rounded-3" appearance="outlined" fxFlex="450px">
                <mat-card-content>
                  <div class="row text-center">
                    <p class="mb-0">
                      Don't have an account?
                      <span
                        ><a class="text-success signup-link" href="sign-up"
                          >Create now</a
                        ></span
                      >
                    </p>
                  </div>
                </mat-card-content>
              </mat-card>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4 d-flex justify-content-center"></div>
    </div>
  </div>
}

@if (displayType === 'forgot-password') {
  <div class="d-flex justify-content-center py-5 body">
    <div class="row d-flex justify-content-center centered-box">
      <div class="col-md-8 pb-4 rounded-5 px-4">
        <div class="row">
          <div fxLayout="row" fxLayoutAlign="center">
            <mat-card class="rounded-5 pt-3" appearance="outlined" fxFlex="450px">
              <mat-card-header fxLayoutAlign="center center">
                <mat-card-title fxLayout="row">
                  <div class="mat-headline-5 primary-green fs-4">
                    <b>Forgot Password</b>
                  </div>
                </mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <form [formGroup]="forgotPassword" fxLayout="column">
                  <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                    <mat-form-field fxFlex appearance="outline" class="rounded-form">
                      <input
                        matInput
                        placeholder="E-mail"
                        aria-label="E-mail"
                        formControlName="email"
                        autocomplete="off"
                        [attr.autocomplete]="'off'"
                        #email />
                      <mat-error
                        [input]="email"
                        [group]="forgotPassword"
                        appFieldError="invalid">
                      </mat-error>
                    </mat-form-field>
                  </div>

                  <div class="row mt-3 mb-5">
                    <div class="col-md-12 d-flex justify-content-center">
                      <button
                        class="px-5 rounded-5 full-width bg-success text-light mt-3 sign-up-button"
                        mat-raised-button
                        type="submit"
                        color="primary"
                        [disabled]="forgotPassword.invalid"
                        (click)="handleForgotPassword()">
                        Send
                      </button>
                    </div>
                  </div>
                  <div class="row mt-n1 mb-3 text-center">
                    <span
                      ><a class="text-success signup-link" (click)="goToLogin()"
                        >Go to login</a
                      ></span
                    >
                  </div>
                </form>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </div>
    </div>
  </div>
}

@if (displayType === 'change-password') {
  <div class="d-flex justify-content-center py-5 body">
    <div class="row d-flex justify-content-center centered-box">
      <div class="col-md-8 pb-4 rounded-5 px-4">
        <div class="row">
          <div fxLayout="row" fxLayoutAlign="center">
            <mat-card class="rounded-5 pt-3" appearance="outlined" fxFlex="450px">
              <mat-card-header fxLayoutAlign="center center">
                <mat-card-title fxLayout="row">
                  <div class="mat-headline-5 primary-green fs-4">
                    <b>Change Password</b>
                  </div>
                </mat-card-title>
              </mat-card-header>
              <mat-card-content>
                <form autocomplete="off" [formGroup]="changePassword" fxLayout="column">
                  <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                    <mat-form-field fxFlex appearance="outline" class="rounded-form">
                      <input
                        matInput
                        placeholder="Email"
                        aria-label="username"
                        formControlName="username"
                        name="new-email"
                        autocomplete="new-email"
                        [attr.autocomplete]="'off'"
                        #username />
                      <mat-error
                        [input]="username"
                        [group]="changePassword"
                        appFieldError="invalid">
                      </mat-error>
                    </mat-form-field>
                  </div>

                  <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                    <mat-form-field fxFlex appearance="outline" class="rounded-form">
                      <mat-label>Enter confirmation code</mat-label>
                      <input
                        matInput
                        minlength="6"
                        maxlength="6"
                        placeholder="Confirmation Code"
                        aria-label="Confirmation-Code"
                        formControlName="confirmationCode"
                        name="new-code"
                        autocomplete="new-code"
                        [attr.autocomplete]="'off'"
                        #confirmationCode />
                      <mat-error
                        [input]="confirmationCode"
                        [group]="changePassword"
                        appFieldError="invalid">
                      </mat-error>
                    </mat-form-field>
                  </div>

                  <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                    <mat-form-field fxFlex appearance="outline" class="rounded-form">
                      <mat-label>Enter your new password</mat-label>
                      <input
                        matInput
                        placeholder="New Password"
                        aria-label="New Password"
                        type="password"
                        formControlName="newPassword"
                        name="new-password"
                        autocomplete="new-password"
                        [attr.autocomplete]="'off'"
                        #newPassword />
                      <mat-hint
                        *ngIf="changePassword.get('newPassword')?.invalid"
                        class="text-danger"
                        >Minimum 8 characters, with number, uppercase &
                        lowercase.</mat-hint
                      >
                      <mat-hint
                        *ngIf="
                          changePassword.get('repeatPassword')?.value !==
                            changePassword.get('newPassword')?.value &&
                          changePassword.get('newPassword')?.valid
                        "
                        class="text-danger">
                        Entered passwords must match.</mat-hint
                      >
                    </mat-form-field>
                  </div>

                  <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
                    <mat-form-field fxFlex appearance="outline" class="rounded-form">
                      <mat-label>Repeat password</mat-label>
                      <input
                        matInput
                        placeholder="Repeat Password"
                        aria-label="Repeat Password"
                        type="password"
                        formControlName="repeatPassword"
                        name="repeat-password"
                        autocomplete="repeat-password"
                        [attr.autocomplete]="'off'"
                        #repeatPassword />
                      <mat-hint
                        *ngIf="changePassword.get('repeatPassword')?.invalid"
                        class="text-danger">
                        Minimum 8 characters, with number, uppercase &
                        lowercase.</mat-hint
                      >
                      <mat-hint
                        *ngIf="
                          changePassword.get('repeatPassword')?.value !==
                            changePassword.get('newPassword')?.value &&
                          changePassword.get('repeatPassword')?.valid
                        "
                        class="text-danger">
                        Entered passwords must match.</mat-hint
                      >
                    </mat-form-field>
                  </div>

                  <div class="row mt-3 mb-5">
                    <div class="col-md-12 d-flex justify-content-center">
                      <button
                        class="px-5 rounded-5 full-width bg-success text-light mt-3 sign-up-button"
                        mat-raised-button
                        type="submit"
                        color="primary"
                        [disabled]="
                          changePassword.invalid &&
                          changePassword.get('repeatPassword')?.value ===
                            changePassword.get('newPassword')?.value
                        "
                        (click)="handleChangePassword()">
                        Confirm
                      </button>
                    </div>
                  </div>
                </form>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </div>
    </div>
  </div>
}
